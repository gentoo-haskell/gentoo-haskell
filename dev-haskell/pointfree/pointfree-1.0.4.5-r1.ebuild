# Copyright 1999-2014 Gentoo Foundation
# Distributed under the terms of the GNU General Public License v2
# $Header: $

EAPI=5

# ebuild generated by hackport 0.3.2.9999

CABAL_FEATURES="bin test-suite"
inherit haskell-cabal

DESCRIPTION="Tool for refactoring expressions into pointfree form"
HOMEPAGE="http://hackage.haskell.org/package/pointfree"
SRC_URI="mirror://hackage/packages/archive/${PN}/${PV}/${P}.tar.gz"

RESTRICT="test"
LICENSE="MIT"
SLOT="0"
KEYWORDS="~amd64 ~x86"
IUSE=""

RDEPEND=""
DEPEND="${RDEPEND}
		>=dev-haskell/cabal-1.8
		>=dev-haskell/haskell-src-exts-1.11
		<dev-haskell/haskell-src-exts-1.15
		<dev-haskell/transformers-0.4
		>=dev-lang/ghc-6.12.1
		test? ( >=dev-haskell/hunit-1.1
			<dev-haskell/hunit-1.3
			>=dev-haskell/quickcheck-2.1
			<dev-haskell/quickcheck-2.7
		)"

src_prepare() {
	epatch "${FILESDIR}"/${P}-haskell-src-exts.patch
	cabal_chdeps \
		    'QuickCheck >= 2.1 && < 2.6' \
	    	'QuickCheck >= 2.1 && < 2.7' \
			'haskell-src-exts >= 1.11 && < 1.14' \
			'haskell-src-exts >= 1.11 && < 1.15' \
			'base >= 3 && < 4.7' \
			'base >= 3 && < 5' \
			'array >= 0.3 && < 0.5' \
			'array >= 0.3 && < 0.6'
}
