# Copyright 1999-2023 Gentoo Authors
# Distributed under the terms of the GNU General Public License v2

EAPI=8

# ebuild generated by hackport 0.8.2.0.9999

CABAL_FEATURES=""
inherit haskell-cabal

DESCRIPTION="Preprocessor for typesetting Haskell sources with LaTeX"
HOMEPAGE="https://github.com/kosmikus/lhs2tex"

LICENSE="GPL-2"
SLOT="0"
KEYWORDS="~amd64"

GHC_BOOTSTRAP_PACKAGES=(
	regex-compat
)

# dev-texlive/texlive-mathscience contains 'stmaryrd' font used
# for guide generation. dev-texlive/texlive-latexextra provides polytable
RDEPEND="
	dev-haskell/regex-compat:=
	>=dev-lang/ghc-8.8.1:=[profile?]
	dev-texlive/texlive-mathscience:=
	dev-texlive/texlive-latexextra:=
"
DEPEND="${RDEPEND}
	>=dev-haskell/cabal-3.0.0.0
"

# Setup.hs uses 'Text.Regex' available in both 'r-c' and 'r-c-tdfa'
HCFLAGS+=" -ignore-package=regex-compat-tdfa"
# datadir is /usr/share/${PN}/${GHC_VER} so mandir is ${DATADIR}/../../man
PATCHES=(
	"${FILESDIR}/${PN}-1.18.1-mandir.patch"
)
