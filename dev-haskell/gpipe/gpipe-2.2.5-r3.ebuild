# Copyright 1999-2022 Gentoo Authors
# Distributed under the terms of the GNU General Public License v2

EAPI=8

# ebuild generated by hackport 0.7.1.1.9999

CABAL_PN="GPipe"
CABAL_P="${CABAL_PN}-${PV}"

CABAL_FEATURES="lib profile haddock hoogle hscolour"
inherit haskell-cabal

S="${WORKDIR}/${CABAL_P}"
CABAL_FILE="${S}/${CABAL_PN}.cabal"

DESCRIPTION="Typesafe functional GPU graphics programming"
HOMEPAGE="https://github.com/tobbebex/GPipe-Core#readme"
SRC_URI="https://hackage.haskell.org/package/${CABAL_P}/${CABAL_P}.tar.gz"

LICENSE="MIT"
SLOT="0/${PV}"
KEYWORDS="~amd64"

RDEPEND=">=dev-haskell/boolean-0.2:=[profile?] <dev-haskell/boolean-0.3:=[profile?]
	>=dev-haskell/exception-transformers-0.3:=[profile?] <dev-haskell/exception-transformers-0.5:=[profile?]
	>=dev-haskell/gl-0.8:=[profile?]
	>=dev-haskell/hashtables-1.2:=[profile?]
	>=dev-haskell/linear-1.18:=[profile?]
	>=dev-lang/ghc-8.4.3:=[profile?]
"
DEPEND="${RDEPEND}
	>=dev-haskell/cabal-2.2.0.1
"

src_prepare() {
	default

	cabal_chdeps \
		'gl >= 0.8 && <= 0.9' 'gl >= 0.8' \
		'linear >= 1.18 && < 1.21' 'linear >= 1.18' \
		'hashtables >= 1.2 && < 1.3' 'hashtables >=1.2'
}
